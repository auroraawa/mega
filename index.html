<!DOCTYPE html><html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>专注任务中心</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      background: #4a90e2;
      color: white;
      width: 100%;
      padding: 20px;
      text-align: center;
      font-size: 24px;
    }
    .section {
      background: white;
      width: 90%;
      max-width: 600px;
      margin: 20px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .task-list li {
      list-style: none;
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }
    .highlight {
      background: #ffefc2;
    }
    button {
      padding: 10px 15px;
      margin-top: 10px;
      border: none;
      background: #4a90e2;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
    #points {
      font-size: 24px;
      color: #e67e22;
    }
    .achievement {
      display: inline-block;
      margin: 5px;
      font-size: 24px;
      opacity: 0.3;
    }
    .achievement.unlocked {
      opacity: 1;
      animation: pop 0.5s ease-in-out;
    }
    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>
  <header>🧭 我的专注任务中心</header>  <div class="section">
    <h3>✅ 当前任务</h3>
    <p id="currentTask">（尚未选择）</p>
    <button onclick="selectRandomTask()">从任务中随机选择一个</button>
  </div>  <div class="section">
    <h3>📋 添加任务</h3>
    <input id="taskInput" type="text" placeholder="输入任务后回车">
    <ul id="taskList" class="task-list"></ul>
  </div>  <div class="section">
    <h3>⏱️ 专注倒计时</h3>
    <p id="timer">25:00</p>
    <button onclick="startTimer()">开始</button>
    <button onclick="resetTimer()">重置</button>
  </div>  <div class="section">
    <h3>🏆 成就点数：<span id="points">0</span></h3>
    <div id="achievements">
      <span class="achievement" id="ach1">🥇</span>
      <span class="achievement" id="ach2">🥈</span>
      <span class="achievement" id="ach3">🥉</span>
    </div>
  </div>  <script>
    let taskList = [];
    let points = 0;
    let currentTask = null;
    let timer;
    let timeLeft = 1500;

    document.getElementById("taskInput").addEventListener("keypress", function(e) {
      if (e.key === "Enter") {
        const val = e.target.value.trim();
        if (val) {
          taskList.push({ text: val, done: false });
          e.target.value = "";
          renderTasks();
        }
      }
    });

    function renderTasks() {
      const list = document.getElementById("taskList");
      list.innerHTML = "";
      taskList.forEach((task, index) => {
        const li = document.createElement("li");
        li.innerText = task.text;
        li.className = index === currentTask ? "highlight" : "";
        li.onclick = () => toggleTask(index);
        list.appendChild(li);
      });
    }

    function toggleTask(index) {
      if (!taskList[index].done) {
        taskList[index].done = true;
        points++;
        updatePoints();
        checkAchievements();
        renderTasks();
      }
    }

    function updatePoints() {
      document.getElementById("points").innerText = points;
    }

    function checkAchievements() {
      if (points >= 1) document.getElementById("ach1").classList.add("unlocked");
      if (points >= 3) document.getElementById("ach2").classList.add("unlocked");
      if (points >= 5) document.getElementById("ach3").classList.add("unlocked");
    }

    function selectRandomTask() {
      const notDone = taskList.map((t, i) => !t.done ? i : -1).filter(i => i !== -1);
      if (notDone.length === 0) {
        alert("没有未完成的任务了！");
        return;
      }
      const randomIndex = notDone[Math.floor(Math.random() * notDone.length)];
      currentTask = randomIndex;
      document.getElementById("currentTask").innerText = taskList[currentTask].text;
      renderTasks();
    }

    function startTimer() {
      clearInterval(timer);
      timer = setInterval(() => {
        if (timeLeft > 0) {
          timeLeft--;
          updateTimerDisplay();
        } else {
          clearInterval(timer);
          alert("专注时间结束，休息一下吧！");
        }
      }, 1000);
    }

    function resetTimer() {
      clearInterval(timer);
      timeLeft = 1500;
      updateTimerDisplay();
    }

    function updateTimerDisplay() {
      const minutes = String(Math.floor(timeLeft / 60)).padStart(2, '0');
      const seconds = String(timeLeft % 60).padStart(2, '0');
      document.getElementById("timer").innerText = `${minutes}:${seconds}`;
    }
  </script></body>
</html>
